require 'set'

def solve(input)
  map = input.split("\n")
  start = [map[0].index('.'),0]
  arrival = [map[-1].index('.'),map.length-1]

  queue = [[start,Set[]]]
  best = {}
  best.default = -1

  while !queue.empty?
    cur,visited = queue.pop
    if cur==arrival
      next
    end
    visited << cur
    x,y = cur
    c = map[y][x]
    possibles = []
    if (c=='.' || c=='^') && cur!=start && map[y-1][x] != '#'
      possibles << [x,y-1]
    end
    if (c=='.' || c=='>') && map[y][x+1] != '#'
      possibles << [x+1,y]
    end
    if (c=='.' || c=='v') && map[y+1][x] != '#'
      possibles << [x,y+1]
    end
    if (c=='.' || c=='<') && map[y][x-1] != '#'
      possibles << [x-1,y]
    end
    possibles.select! { |coord| !visited.include?(coord) && visited.length>best[coord] }
    if possibles.empty?
      next
    end
    possibles.each { |coord| best[coord] = visited.length }
    queue << [possibles[0],visited]
    possibles[1..].each { |coord| queue << [coord,Set[*visited]] }
  end

  p best[arrival]
end

TEST = <<~EOF
#.#####################
#.......#########...###
#######.#########.#.###
###.....#.>.>.###.#.###
###v#####.#v#.###.#.###
###.>...#.#.#.....#...#
###v###.#.#.#########.#
###...#.#.#.......#...#
#####.#.#.#######.#.###
#.....#.#.#.......#...#
#.#####.#.#.#########v#
#.#...#...#...###...>.#
#.#.#v#######v###.###v#
#...#.>.#...>.>.#.###.#
#####v#.#.###v#.#.###.#
#.....#...#...#.#.#...#
#.#########.###.#.#.###
#...###...#...#...#.###
###.###.#.###v#####v###
#...#...#.#.>.>.#.>.###
#.###.###.#.###.#.#v###
#.....###...###...#...#
#####################.#
EOF

solve TEST

INPUT = <<~EOF
#.###########################################################################################################################################
#.#...#...#.........#.........#####.......#...#.......#...#...#...#####...###...#...#...###...###...#...#...#.....#.....#.....###...###...###
#.#.#.#.#.#.#######.#.#######.#####.#####.#.#.#.#####.#.#.#.#.#.#.#####.#.###.#.#.#.#.#.###.#.###.#.#.#.#.#.#.###.#.###.#.###.###.#.###.#.###
#.#.#.#.#.#.#.......#.......#.....#.#.....#.#.#.....#.#.#...#.#.#...#...#...#.#.#.#...#...#.#.#...#...#.#.#.#.#...#.#...#...#.#...#.....#...#
#.#.#.#.#.#.#v#############.#####.#.#.#####.#.#####.#.#.#####.#.###.#.#####.#.#.#.#######.#.#.#.#######.#.#.#.#.###.#.#####.#.#.###########.#
#.#.#.#.#.#.#.>.#...#...#...#.....#.#...#...#.#...#.#...#.....#...#.#.#.....#.#.#.#.......#.#.#.......#.#.#...#.....#...#...#.#...#.........#
#.#.#.#.#.#.#v#.#.#.#.#.#.###.#####.###.#.###.#.#.#.#####.#######.#.#.#.#####.#.#.#.#######.#.#######.#.#.#############.#.###.###.#.#########
#.#.#.#.#...#.#.#.#.#.#.#...#.....#.#...#...#.#.#.#.....#.#...#...#...#.....#.#.#.#.#...###.#.#...###.#.#.......#.......#...#.....#.#.......#
#.#.#.#.#####.#.#.#.#.#.###.#####.#.#.#####.#.#.#.#####.#.#.#.#.###########.#.#.#.#.#.#.###.#.#.#.###.#.#######.#.#########.#######.#.#####.#
#...#...#.....#.#.#.#.#...#.#.....#.#...###.#.#.#.#.....#...#.#.....#...#...#.#.#.#...#.....#.#.#.#...#.#.....#.#.#...#...#.......#...#.....#
#########.#####.#.#.#.###.#.#.#####.###.###.#.#.#.#.#########.#####.#.#.#.###.#.#.###########.#.#.#.###.#.###.#.#.#.#.#.#.#######.#####.#####
#.........#...#...#...###...#...#...#...#...#.#.#.#.........#.#...#...#.#.###.#.#.#...........#.#.#...#.#...#.#.#.#.#.#.#.#...#...#...#.....#
#.#########.#.#################.#.###.###.###.#.#.#########.#.#.#.#####.#.###.#.#.#.###########.#.###.#.###.#.#.#.#.#.#.#.#.#.#.###.#.#####.#
#.........#.#.#...###...........#...#...#...#.#.#.#.>.>.....#.#.#...#...#.>.>.#.#.#.....#...###.#.#...#...#.#...#.#.#.#.#.#.#.#.#...#...#...#
#########.#.#.#.#.###.#############.###.###.#.#.#.#.#v#######.#.###.#.#####v###.#.#####.#.#.###.#.#.#####.#.#####.#.#.#.#.#.#.#.#.#####.#.###
#.........#.#...#...#.#.....###...#.#...#...#.#.#.#.#.......#...###.#...###...#...#.....#.#...#.#.#.....#.#.#.....#.#.#.#.#.#.#.#.#...#...###
#.#########.#######.#.#.###.###.#.#.#.###.###.#.#.#.#######.#######.###.#####.#####.#####.###.#.#.#####.#.#.#.#####.#.#.#.#.#.#.#.#.#.#######
#...#.....#.#.......#...#...#...#.#.#.>.>.###...#.#...#.....#.......#...#.....#.....#...#...#.#.#.###...#.#.#.#...#.#...#.#.#...#.#.#...#...#
###.#.###.#.#.###########.###.###.#.###v#########.###.#.#####.#######.###.#####.#####.#.###.#.#.#.###.###.#.#.#.#.#.#####.#.#####.#.###.#.#.#
#...#...#...#.#.........#...#...#...###.....#.....#...#.....#.#...#...###.....#...#...#...#.#.#.#.>.>.#...#.#.#.#.#.#.....#.#.....#.#...#.#.#
#.#####.#####.#.#######.###.###.###########.#.#####.#######.#.#.#.#.#########.###.#.#####.#.#.#.###v###.###.#.#.#.#.#.#####.#.#####.#.###.#.#
#...#...#.....#.#.......###...#.#...........#.......#.......#...#.#.#...###...#...#...#...#.#...###...#.....#...#.#.#.....#.#.......#.....#.#
###.#.###.#####.#.###########.#.#.###################.###########.#.#.#.###.###.#####.#.###.#########.###########.#.#####.#.###############.#
#...#.###.......#.......#...#...#.....#...#...#...###...........#.#.#.#.....###...#...#...#.....#.....#...#...###...#...#...###.............#
#.###.#################.#.#.#########.#.#.#.#.#.#.#############.#.#.#.###########.#.#####.#####.#.#####.#.#.#.#######.#.#######.#############
#...#.#...#...#...#.....#.#.###...###...#...#.#.#...............#...#...........#...###...#.....#.#...#.#.#.#...#...#.#.#...#...###.........#
###.#.#.#.#.#.#.#.#.#####.#.###.#.###########.#.###############################.#######.###.#####.#.#.#.#.#.###.#.#.#.#.#.#.#.#####.#######.#
###...#.#.#.#...#...#####.#.#...#.#...#.....#.#.................#...............###...#.....#...#...#...#.#.#...#.#.#.#.#.#.#.......#...#...#
#######.#.#.#############.#.#.###.#.#.#.###.#.#################.#.#################.#.#######.#.#########v#.#.###.#.#.#.#.#.#########.#.#.###
#...#...#.#.....#...###...#.#.#...#.#.#...#...#...#...........#.#.................#.#...#.....#.#...#...>.>.#...#.#.#.#.#.#.###...#...#.#...#
#.#.#.###.#####.#.#.###.###.#.#.###.#.###v#####.#.#.#########.#.#################.#.###.#.#####.#.#.#.###v#####.#.#.#.#.#.#.###v#.#.###.###.#
#.#.#...#.#...#.#.#...#...#.#.#.#...#...>.>.###.#.#.....#...#...#...#.............#...#.#.....#.#.#...###.....#.#.#.#.#...#...>.#...###.....#
#.#.###.#.#.#.#.#.###.###.#.#.#.#.#######v#.###.#.#####.#.#.#####.#.#.###############.#.#####.#.#.###########.#.#.#.#.#########v#############
#.#.#...#.#.#.#...#...###.#...#.#.###...#.#.#...#.#...#...#.#...#.#.#...#.......###...#...#...#.#.#...........#...#.#.#.......#...........###
#.#.#.###.#.#.#####v#####.#####.#.###.#.#.#.#.###.#.#.#####.#.#.#.#.###.#.#####.###.#####.#.###.#.#.###############.#.#.#####.###########.###
#.#.#...#...#.#...#.>...#.....#.#...#.#...#...###.#.#.#.....#.#.#.#.###...#.....#...###...#...#.#.#...#...........#.#.#.....#.....#.....#...#
#.#.###.#####.#.#.#v###.#####.#.###.#.###########.#.#.#.#####.#.#.#.#######.#####.#####.#####.#.#.###.#.#########.#.#.#####.#####.#.###.###.#
#.#.....#...#...#.#...#.#...#.#.#...#.#...#...###...#.#...###.#.#.#.#...###.#...#.....#...#...#...###...#...#.....#...#...#.#...#...###.#...#
#.#######.#.#####.###.#.#.#.#.#.#.###.#.#.#.#.#######.###.###.#.#.#.#.#.###v#.#.#####.###.#.#############.#.#.#########.#.#.#.#.#######.#.###
#.#.....#.#.....#.....#...#...#...###...#...#.#.......#...#...#.#.#.#.#...>.>.#.......###...#...#...#...#.#.#...#.......#.#...#.......#.#...#
#.#.###.#.#####.#############################.#.#######v###.###.#.#.#.#####v#################.#.#.#.#.#.#.#.###.#.#######.###########.#.###.#
#.#.#...#.#...#...............#...............#.#...#.>.>...###...#.#.....#...#.....#.........#.#.#...#...#.....#.#.....#.............#...#.#
#.#.#.###.#.#.###############.#.###############.#.#.#.#v###########.#####.###.#.###.#.#########.#.###############.#.###.#################.#.#
#.#.#...#.#.#...............#.#.#.............#...#.#.#...#...#...#.#...#.#...#.#...#.#.........#...............#...###.....#...#.......#...#
#.#.###.#.#.###############.#.#.#.###########.#####.#.###.#.#.#.#.#.#.#.#.#.###.#.###.#.#######################.###########.#.#.#.#####.#####
#.#.###...#...#...........#.#.#.#.#...........#.....#...#.#.#.#.#.#...#...#...#.#.#...#.........#...............#...........#.#...#...#.....#
#.#.#########.#.#########.#.#.#.#.#.###########.#######.#.#.#.#.#.###########.#.#.#.###########.#.###############.###########.#####.#.#####.#
#...#...#...#...#.........#.#.#.#.#.........###.....#...#.#.#.#.#...#.....###...#...###.........#...#.....###...#.............#.....#.......#
#####.#.#.#.#####.#########.#.#.#.#########.#######.#.###.#.#.#.###.#.###.#############.###########.#.###.###.#.###############.#############
#.....#...#.......#####...#...#...#...#...#.......#.#.#...#.#.#.#...#.#...#...#...#.....###...#...#.#.###...#.#.#...#...#.....#...#.........#
#.#####################.#.#########.#.#.#.#######.#.#.#.###.#.#.#.###.#.###.#.#.#.#.#######.#.#.#.#.#.#####.#.#.#.#.#.#.#.###.###.#.#######.#
#...........#.......#...#.#...###...#...#.........#...#...#.#.#.#.....#...#.#.#.#...#...#...#...#.#...#.....#.#.#.#.#.#.#...#.....#.#.......#
###########.#.#####.#.###.#.#.###.#######################.#.#.#.#########.#.#.#.#####.#.#.#######.#####.#####.#.#.#.#.#.###v#######.#.#######
###...#...#...###...#.#...#.#.#...#...............#.....#...#...###.......#.#.#.......#.#.#.......#...#...###.#.#.#.#.#.#.>.###.....#...#...#
###.#.#.#.#######v###.#.###.#.#.###.#############.#.###.###########v#######.#.#########v#.#.#######.#.###.###.#.#.#.#.#.#.#v###.#######.#.#.#
#...#...#...#...#.>...#.....#.#.#...###...........#...#.....#.....>.>.....#.#.#.......>.>.#.....###.#.#...#...#.#.#.#.#.#.#.#...#.......#.#.#
#.#########.#.#.#v###########.#.#.#####.#############.#####.#.#####v#####.#.#.#.#######v#######.###.#.#.###.###.#.#.#.#.#.#.#.###.#######.#.#
#.....#...#...#...#.....#...#.#...#.....#...#.......#.#...#.#.....#.....#.#.#...###...#.#.....#.#...#.#...#...#.#.#...#.#.#.#.#...#...#...#.#
#####.#.#.#########.###.#.#.#.#####.#####.#.#.#####.#.#.#.#.#####.#####.#.#.#######.#.#.#.###.#.#.###.###.###.#.#.#####.#.#.#.#.###.#.#.###.#
#...#.#.#.........#...#...#...#...#...#...#.#.....#.#...#.#.###...#.....#...#.......#...#...#.#.#...#...#...#.#.#.#...#.#.#...#.....#...#...#
#.#.#.#.#########.###.#########.#.###.#.###.#####.#.#####.#.###.###.#########.#############.#.#.###.###.###.#.#.#.#.#.#.#.###############.###
#.#.#...#...#.....###...###...#.#.###...#...#.....#...#...#.#...###.#.......#...#...###.....#...###...#.#...#.#.#...#.#...#...............###
#.#.#####.#.#.#########.###.#.#.#.#######.###.#######.#.###.#.#####.#.#####.###.#.#.###.#############.#.#v###.#.#####.#####.#################
#.#.#...#.#.#.....#...#...#.#.#.#.#...###...#.......#.#.#...#...#...#.#.....#...#.#...#.#...#...#...#.#.>.>.#.#.......#...#.............#####
#.#.#.#.#.#.#####.#.#.###.#.#.#.#.#.#.#####v#######.#.#.#.#####.#.###.#.#####.###.###.#.#.#.#.#.#.#.#.###v#.#.#########.#.#############.#####
#.#...#...#.....#...#.#...#.#.#.#...#...#.>.>.#.....#...#...#...#...#.#.#...#.....#...#...#.#.#...#.#...#.#...###.....#.#.#...#...#...#.....#
#.#############.#####.#.###.#.#.#######.#.#v#.#.###########.#.#####.#.#.#.#.#######.#######.#.#####.###.#.#######.###.#.#.#.#.#.#.#.#.#####.#
#.............#.......#.....#...#.....#...#.#...###...###...#.#...#...#...#.###...#.#...###.#.#.....#...#...#.....#...#.#...#...#...#.......#
#############.###################.###.#####.#######.#.###.###.#.#.#########.###.#.#.#.#.###.#.#.#####.#####.#.#####.###.#####################
#.........###.......#####.....###...#...###.........#...#.....#.#.........#.#...#.#...#...#.#.#.....#.#.....#.#.....#...#...#...........#...#
#.#######.#########.#####.###.#####.###.###############.#######.#########.#.#.###.#######.#.#.#####.#.#.#####.#.#####.###.#.#.#########.#.#.#
#.......#...#.....#.#.....#...#...#...#.#...#.....#...#.#...#...#...#####...#...#.........#...#...#.#.#...#...#.....#...#.#...#...#...#.#.#.#
#######.###.#.###.#.#.#####.###.#.###.#.#.#.#.###.#.#.#.#.#.#.###.#.###########.###############.#.#.#.###.#.#######.###.#.#####.#.#.#.#.#.#.#
#...###.#...#...#.#.#.....#.#...#.#...#...#...###...#...#.#.#.....#...........#.................#.#...###.#.#.......###...#...#.#.#.#...#.#.#
#.#.###.#.#####.#.#.#####.#.#v###.#.#####################.#.#################.###################.#######.#.#.#############.#.#v#.#.#####.#.#
#.#.....#.#.....#...#...#.#.>.>.#...#...#...#...###...###.#.#...###...........#...................#.....#...#.......#...#...#.>.#...###...#.#
#.#######.#.#########.#.#.###v#.#####.#.#.#.#.#.###.#.###.#.#.#.###v###########.###################.###.###########.#.#.#.#####v#######.###.#
#...#...#...#...#...#.#.#...#.#.......#.#.#.#.#.#...#...#.#...#...>.>.###.......#.....#.....#.....#.#...###...#.....#.#.#.....#.###...#...#.#
###.#.#v#####.#.#.#.#.#.###.#.#########.#.#.#.#.#.#####.#.#########v#.###.#######.###.#.###.#.###.#.#.#####.#.#.#####.#.#####.#.###.#.###.#.#
###...#.>...#.#.#.#.#.#...#.#...#.....#.#.#.#.#.#.#####...#...#...#.#...#.........#...#...#.#...#.#.#...#...#.#.....#.#.###...#.#...#.#...#.#
#######v###.#.#.#.#.#.###.#.###.#.###.#.#.#.#.#.#.#########.#.#.#.#.###.###########.#####.#.###.#.#.###.#.###.#####.#.#.###.###.#.###.#.###.#
#...###...#.#.#.#.#.#.#...#.#...#.#...#...#...#.#.#.........#...#.#...#.....#...#...#...#.#.###.#.#.#...#...#.###...#.#.....###.#.###.#.#...#
#.#.#####.#.#.#.#.#.#.#.###.#.###.#.###########.#.#.#############.###.#####.#.#.#.###.#.#.#.###.#.#.#.#####.#.###v###.#########.#.###.#.#.###
#.#.......#...#.#.#.#.#...#.#...#.#...........#...#...#.........#.#...###...#.#.#...#.#.#.#.#...#.#.#.#...#.#...>.>.#.........#.#.###...#...#
#.#############.#.#.#.###.#.###.#.###########.#######.#.#######.#.#.#####.###.#.###v#.#.#.#.#.###.#.#.#.#.#.#####v#.#########.#.#.#########.#
#.............#...#.#.#...#...#...#...........#.......#.#.......#...#.....#...#...>.>.#...#...#...#.#.#.#.#.#...#.#.....#...#.#.#.#.........#
#############.#####.#.#.#####.#####.###########.#######.#.###########.#####.#######v###########.###.#.#.#.#.#.#.#.#####.#.#.#.#.#.#.#########
###.........#...###.#.#...#...#...#...###...###.........#...........#.#...#.......#.......#...#.#...#.#.#.#.#.#.#.....#.#.#.#.#...#.#.......#
###.#######.###.###.#.###.#.###.#.###.###.#.#######################.#.#.#.#######.#######.#.#.#.#.###.#.#.#.#.#.#####.#.#.#.#.#####.#.#####.#
#...#...###...#...#.#.###.#.#...#...#...#.#...#...#.............#...#.#.#.........#.......#.#.#...###...#...#.#.#...#.#.#.#...#...#...###...#
#.###.#.#####.###.#.#.###.#.#.#####.###.#.###.#.#.#.###########.#.###.#.###########.#######.#.###############.#.#.#.#.#.#.#####.#.#######.###
#.....#.....#.#...#...#...#.#.....#.....#.#...#.#.#.....#.....#.#.###...#...#.....#...#.....#.....###...###...#.#.#.#.#.#...###.#.#...#...###
###########.#.#.#######.###.#####.#######.#.###.#.#####.#.###.#.#.#######.#.#.###.###.#.#########.###.#.###.###.#.#.#.#.###.###.#.#.#.#.#####
###.........#...#...###.....#...#.....#...#...#.#.....#...#...#.#...#.....#.#.#...###...#.........#...#.....###...#...#.....#...#.#.#.#.....#
###.#############.#.#########.#.#####.#.#####.#.#####.#####.###.###.#.#####.#.#.#########.#########.#########################.###.#.#.#####.#
#...#...#.........#...#...#...#.......#.....#...#.....#.....###.....#.....#.#.#...#...#...#.....###.............#...#...#...#...#.#.#.......#
#.###.#.#.###########.#.#.#.###############.#####.#####.#################.#.#.###.#.#.#.###.###.###############.#.#.#.#.#.#.###.#.#.#########
#.....#...#...........#.#.#...#...#.......#.#.....#...#.....###.....#...#.#.#.#...#.#.#.....#...#.....#.........#.#.#.#.#.#...#.#.#.......###
###########.###########.#.###.#.#.#.#####.#.#.#####.#.#####v###.###.#.#.#.#.#.#.###.#.#######.###.###.#.#########.#.#.#.#.###.#.#.#######.###
#...........###...#.....#...#...#...#.....#.#.#...#.#...#.>.>.#.#...#.#.#.#.#.#.###.#.#.......#...#...#.........#.#.#.#.#...#...#.#.....#...#
#.#############.#.#.#######.#########.#####.#.#.#.#.###.#.#v#.#.#.###.#.#.#.#.#.###.#.#v#######.###.###########.#.#.#.#.###.#####.#.###.###.#
#.#.........#...#.#.#.......#.........#...#.#.#.#.#.###...#.#.#.#.#...#.#.#.#.#.#...#.>.>...###...#.#.....#.....#.#.#.#.#...#.....#...#.#...#
#.#.#######.#.###.#.#.#######.#########.#.#.#.#.#.#.#######.#.#.#.#.###.#.#.#.#.#.#####v###.#####.#.#.###.#.#####.#.#.#.#.###.#######.#.#.###
#.#.#.......#...#...#...#...#.........#.#...#...#...#####...#...#...###.#.#.#.#.#.#.....#...#...#.#.#...#...#...#.#.#.#.#.#...###...#.#.#.###
#.#.#.#########.#######.#.#.#########.#.#################.#############.#.#.#.#.#.#.#####.###.#.#.#.###v#####.#.#.#.#.#.#.#.#####.#.#.#.#v###
#...#...#...#...#...#...#.#.#.........#.......#.....#.....#...###.....#...#...#...#...###.#...#.#.#.#.>.>.#...#.#.#.#.#.#.#.#...#.#...#.>.###
#######.#.#.#.###.#.#.###.#.#.###############.#.###.#.#####.#.###.###.###############.###.#.###.#.#.#.#v#.#.###.#.#.#.#.#.#.#.#.#.#######v###
#.......#.#.#...#.#...###.#.#.........#.......#.#...#.#.....#...#...#.#.....#...#####...#.#...#...#.#.#.#...#...#.#.#.#.#.#.#.#...#.....#.###
#.#######.#.###.#.#######.#.#########.#.#######.#.###.#.#######.###.#.#.###.#.#.#######.#.###.#####.#.#.#####.###.#.#.#.#.#.#.#####.###.#.###
#...#...#.#.#...#.......#.#...#...#...#.....#...#...#...#...###.....#.#.#...#.#.#.......#.....#...#.#.#...###...#.#...#...#...#.....###.#...#
###.#.#v#.#.#.#########.#.###.#.#.#.#######.#.#####.#####.#.#########.#.#.###.#.#.#############.#.#.#.###.#####.#.#############.#######.###.#
###...#.>.#.#.#.........#...#.#.#.#...#...#...#...#...#...#.........#...#...#.#.#...............#.#...###...#...#...#.......###...#...#.#...#
#######v###.#.#.###########.#.#.#.###v#.#.#####.#.###.#.###########.#######.#.#.#################.#########.#.#####.#.#####.#####.#.#.#.#.###
###...#...#.#.#.#...#.....#.#.#.#...>.>.#.....#.#.#...#...#.......#.#.......#.#...###...#.......#.#.........#...#...#.#...#.......#.#.#...###
###.#.###.#.#.#.#.#.#.###.#.#.#.#####v#######.#.#.#.#####.#.#####.#.#.#######.###.###.#.#.#####.#.#.###########.#.###.#.#.#########.#.#######
#...#.....#.#.#.#.#.#.###.#.#...###...#...###...#...#.....#.#.....#.#.#...#...#...#...#.#...###...#...........#...###...#...#.......#.....###
#.#########.#.#.#.#.#.###.#.#######.###.#.###########.#####.#.#####.#.#.#.#.###.###.###.###.#################.#############.#.###########.###
#.#...#...#...#.#.#...###...###...#.....#...........#...#...#.....#...#.#.#...#.....###.....#.......#...#...#.#.......#####.#.#.........#...#
#.#.#.#.#.#####.#.#############.#.#################.###.#.#######.#####.#.###.###############.#####.#.#.#.#.#.#.#####.#####.#.#.#######.###.#
#...#.#.#.#...#.#.....###.......#.....#...#...#.....#...#...#...#.......#.#...#.............#.....#.#.#...#.#.#.#...#.#.....#.#.......#.#...#
#####.#.#.#.#.#.#####.###.###########.#.#.#.#.#.#####.#####.#.#.#########.#.###.###########.#####.#.#.#####.#.#.#.#.#.#.#####.#######.#.#.###
#...#...#...#.#.#.....#...#...#...###...#...#.#...###.......#.#...........#.....#.....#.....#...#.#.#.....#...#.#.#...#.......###.....#...###
#.#.#########.#.#.#####.###.#.#.#.###########.###.###########.###################.###.#.#####.#.#.#.#####v#####.#.###############.###########
#.#...........#...#...#.#...#...#...#...#...#.....#...###...#.............###...#...#...#...#.#.#.#...#.>.>.#...#.......#.........#...#...###
#.#################.#.#.#.#########.#.#.#.#.#######.#.###.#.#############.###.#.###v#####.#.#.#.#.###.#.###.#.#########.#.#########.#.#.#.###
#.........#.....#...#.#.#.#.........#.#...#.......#.#.#...#.....#.........#...#.#.>.>.#...#.#.#.#...#.#.#...#.#.........#...........#...#...#
#########.#.###.#.###.#.#.#.#########.###########.#.#.#.#######.#.#########.###.#.###.#.###.#.#.###.#.#.#.###.#.###########################.#
#.........#.#...#.#...#...#...#...###.#...#.......#.#.#...#...#...###...#...###.#.#...#...#...#.#...#...#.....#...#.....#.............#...#.#
#.#########.#.###.#.#########.#.#.###.#.#.#.#######.#.###.#.#.#######.#.#.#####.#.#.#####.#####.#.###############.#.###.#.###########.#.#.#.#
#.........#.#.#...#...###...#...#...#...#.#...#...#.#...#...#.....#...#.#.....#...#...#...###...#.......#.........#.#...#...........#.#.#...#
#########.#.#.#.#####.###.#.#######.#####.###.#.#.#.###.#########.#.###.#####.#######.#.#####.#########.#.#########.#.#############.#.#.#####
###.......#.#.#.#...#...#.#...#.....#...#...#.#.#.#.#...###...###.#.#...#...#...#.....#.....#.#.....#...#.........#.#...#...#...#...#...#...#
###.#######.#.#.#.#.###.#.###.#.#####.#.###.#.#.#.#.#.#####.#.###v#.#.###.#.###.#.#########.#.#.###.#.###########.#.###.#.#.#.#.#v#######.#.#
#...#.....#.#.#...#.###.#.#...#...#...#...#.#.#.#.#.#...#...#.#.>.>.#...#.#...#.#...#...#...#.#...#...###.........#.###.#.#.#.#.>.###...#.#.#
#.###.###.#.#.#####.###.#.#.#####v#.#####.#.#.#.#.#.###.#.###.#.#######.#.###.#.###.#.#.#.###.###.#######.#########.###.#.#.#.###v###.#.#.#.#
#.#...###.#.#.......#...#.#...#.>.>.#.....#.#.#.#.#.#...#...#.#.......#.#...#.#.#...#.#.#...#...#.......#.#.......#.#...#.#...#...#...#.#.#.#
#.#.#####.#.#########.###.###.#.#####.#####.#.#.#.#.#.#####.#.#######.#.###.#.#.#.###.#.###.###.#######.#.#.#####.#.#.###.#####.###.###.#.#.#
#.#.....#.#.#.........#...#...#...#...#...#.#.#.#.#.#...#...#.#...#...#.#...#.#.#.#...#.#...#...#...#...#.#.#.....#.#...#.....#...#.#...#.#.#
#.#####.#.#.#.#########.###.#####.#.###.#.#.#.#.#.#.###.#.###.#.#.#.###.#.###.#.#.#.###.#.###.###.#.#.###.#.#.#####.###.#####.###.#.#.###.#.#
#.......#...#...........###.......#.....#...#...#...###...###...#...###...###...#...###...###.....#...###...#.......###.......###...#.....#.#
###########################################################################################################################################.#
EOF

solve INPUT
